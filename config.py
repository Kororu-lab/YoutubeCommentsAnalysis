"""
YouTube Comments Analysis Configuration
유튜브 댓글 분석 설정 파일 - 단일 파일 분석 모드
"""

import torch
import os
from datetime import datetime

class AnalysisConfig:
    """분석 설정 클래스"""
    
    # ===== 분석 대상 설정 =====
    # 단일 CSV 파일 분석 모드
    TARGET_NAME = "YouTube Comments Analysis"
    ANALYSIS_MODE = "single_file"  # 단일 파일 분석 모드
    
    # ===== 디바이스 설정 =====
    @staticmethod
    def get_device():
        """최적 디바이스 자동 선택"""
        if torch.cuda.is_available():
            return torch.device('cuda')
        elif hasattr(torch.backends, 'mps') and torch.backends.mps.is_available():
            return torch.device('mps')
        else:
            return torch.device('cpu')
    
    DEVICE = get_device()
    
    # ===== 모델 설정 =====
    SENTIMENT_MODELS = {
        'binary': {
            'model_name': 'monologg/koelectra-small-finetuned-nsmc',
            'labels': ['부정', '긍정']
        },
        'emotion_6': {
            'model_name': 'hun3359/mdistilbertV3.1-sentiment',
            'labels': ['분노', '슬픔', '불안', '상처', '기쁨', '당황']
        }
    }
    
    # 토픽 분석 활성화 (멀티프로세싱 문제 해결)
    TOPIC_ANALYSIS_ENABLED = True
    
    TOPIC_MODELS = {
        'bertopic': {
            'embedding_model': 'jhgan/ko-sroberta-multitask',
            'min_topic_size': 10,  # 더 작은 최소 토픽 크기
            'nr_topics': 6,  # 토픽 수 더 감소
            'calculate_probabilities': False,  # 확률 계산 비활성화로 메모리 절약
            'low_memory': True  # 저메모리 모드
        },
        'lda': {
            'num_topics': 4,  # 토픽 수 더 감소
            'passes': 2,  # 패스 수 더 감소
            'alpha': 'auto',
            'eta': 'auto',
            'per_word_topics': False,  # 단어별 토픽 비활성화로 메모리 절약
            'minimum_probability': 0.1,  # 최소 확률 임계값으로 메모리 절약
            'chunksize': 200,  # 청크 크기 더 감소
            'iterations': 30,  # 반복 횟수 더 감소
            'eval_every': None,  # 평가 비활성화
            'random_state': 42  # 재현성을 위한 시드 설정
        }
    }
    
    # ===== 한국어 불용어 설정 =====
    KOREAN_STOPWORDS = [
        # Major Topic
        '마약',

        # Custom Stopwords
        '안되다', '야하다', '돼다', '지다', '차다', '대한민국', '국민', '정치', '정도', '무당',
        '해주다', '이쁘다', '말다', '누가', '요즘', '짝짝', '꼴리다', '대다', '어떻다', '걸리다'
        '곽상도', '송해교', '이준석', '이재명', '이선균', '안은진', '배현진', '한동훈', '윤시원',
        '허경영', '바이든', '트럼프', '전혜진', '소희', '이진호', '권지용', '신혜성', 
        '높이다', '보여주다', '되어다', '해보다', '사회', '국가', '어이', '소리', '이렇다',
        '들이다', '걸다', '세상', '우리나라', '고기', '돋다',' 한국', '문제', '관련',
        '그게', '자기', '미국', '최소', '최대', '제발', '커서', '종합', '읍니', '국회의원', '민주당',
        '국힘', '대표', '일단', 
        '건가', '절대', '시키다', '저러다', '아인', '넘다', '우리', '얼마나', '당하다', '사건', '차리다',

        # 기본 조사/어미
        '이', '가', '을', '를', '에', '에서', '로', '으로', '와', '과', '의', '도', '만', '부터', '까지',
        '에게', '한테', '께', '에게서', '한테서', '께서', '보다', '처럼', '같이', '마다', '조차', '마저',
        '은', '는', '이다', '다', '이야', '야', '이네', '네', '이군', '군', '이지', '지',
        
        # 기본 동사 (어간) - 대폭 확장
        '하다', '되다', '있다', '없다', '아니다', '이다', '가다', '오다', '보다', '말하다', '생각하다',
        '알다', '모르다', '주다', '받다', '먹다', '마시다', '자다', '일어나다', '앉다', '서다',
        '걷다', '뛰다', '타다', '내리다', '들어가다', '나오다', '올라가다', '내려가다',
        '만들다', '사다', '팔다', '쓰다', '읽다', '듣다', '보내다', '받다', '찾다', '잃다',
        '나다', '들다', '놓다', '두다', '내다', '넣다', '빼다', '꺼내다', '집어넣다',
        '시작하다', '끝나다', '계속하다', '그만하다', '멈추다', '쉬다', '일하다', '공부하다',
        '놀다', '운동하다', '여행하다', '요리하다', '청소하다', '빨래하다', '설거지하다',
        '살다', '죽다', '태어나다', '자라다', '늙다', '변하다', '바뀌다', '달라지다',
        '움직이다', '멈추다', '돌다', '돌리다', '밀다', '당기다', '던지다', '잡다',
        '열다', '닫다', '켜다', '끄다', '연결하다', '끊다', '묶다', '풀다',
        # 추가 중요 동사들
        '같다', '다르다', '않다', '못하다', '안하다', '그렇다', '아니다', '맞다', '틀리다',
        '싶다', '원하다', '바라다', '희망하다', '기대하다', '걱정하다', '염려하다',
        '느끼다', '감정하다', '인식하다', '깨닫다', '이해하다', '파악하다', '판단하다',
        '결정하다', '선택하다', '고르다', '뽑다', '택하다', '정하다', '결심하다',
        '노력하다', '애쓰다', '힘쓰다', '분투하다', '투쟁하다', '싸우다', '경쟁하다',
        '도움하다', '돕다', '지원하다', '후원하다', '협력하다', '협조하다', '참여하다',
        
        # 기본 형용사 (어간)
        '좋다', '나쁘다', '크다', '작다', '많다', '적다', '높다', '낮다', '길다', '짧다',
        '넓다', '좁다', '두껍다', '얇다', '무겁다', '가볍다', '빠르다', '느리다', '뜨겁다', '차갑다',
        '밝다', '어둡다', '새롭다', '오래되다', '어리다', '늙다', '젊다', '예쁘다', '못생기다',
        '똑똑하다', '바보같다', '친절하다', '불친절하다', '재미있다', '재미없다', '쉽다', '어렵다',
        # 추가 중요 형용사들
        '중요하다', '필요하다', '가능하다', '불가능하다', '당연하다', '자연스럽다', '이상하다',
        '정상적이다', '비정상적이다', '일반적이다', '특별하다', '평범하다', '독특하다',
        '확실하다', '불확실하다', '명확하다', '모호하다', '분명하다', '애매하다',
        '심각하다', '가벼운', '무거운', '가벼운', '심각한', '중대한', '사소한',
        
        # 지시어/대명사
        '그', '저', '이', '것', '거', '게', '놈', '년', '분', '사람', '애', '아이', '어른',
        '남자', '여자', '여기', '거기', '저기', '어디', '언제', '누구', '무엇', '왜', '어떻게',
        '이것', '그것', '저것', '이거', '그거', '저거', '이런', '그런', '저런', '어떤',
        
        # 수량/정도 표현
        '하나', '둘', '셋', '넷', '다섯', '여섯', '일곱', '여덟', '아홉', '열',
        '첫', '둘째', '셋째', '마지막', '전부', '모두', '모든', '각', '각각', '전체',
        '일부', '부분', '전반', '대부분', '대다수', '소수', '몇', '여러', '수많은',
        '많은', '적은', '조금', '좀', '약간', '상당히', '꽤', '매우', '아주', '정말',
        '진짜', '완전', '너무', '엄청', '되게', '막', '그냥', '별로', '전혀', '거의',
        
        # 시간 표현
        '오늘', '어제', '내일', '모레', '글피', '그저께', '지금', '현재', '과거', '미래',
        '전', '후', '먼저', '나중에', '이전', '이후', '동안', '사이', '때', '시간', '순간',
        '잠깐', '잠시', '계속', '항상', '늘', '언제나', '가끔', '때때로', '자주', '드물게',
        
        # 장소 표현
        '위', '아래', '앞', '뒤', '옆', '곁', '근처', '주변', '안', '밖', '속', '겉',
        '왼쪽', '오른쪽', '가운데', '중간', '끝', '처음', '시작', '마지막',
        
        # 접속어/부사
        '그리고', '그런데', '하지만', '그러나', '그래서', '따라서', '그러므로', '또한', '또',
        '역시', '역시나', '물론', '당연히', '확실히', '분명히', '아마', '혹시', '만약',
        '비록', '설령', '차라리', '오히려', '특히', '더욱', '더욱더', '한층', '훨씬',
        # 추가 접속어/부사
        '그냥', '단지', '단순히', '오직', '단지', '겨우', '고작', '불과', '단순',
        '정말', '진짜', '실제로', '사실', '실제', '정말로', '진짜로', '실제로는',
        '아직', '벌써', '이미', '이제', '곧', '바로', '즉시', '당장', '지금',
        '항상', '늘', '언제나', '계속', '계속해서', '지속적으로', '꾸준히',
        '가끔', '때때로', '종종', '자주', '드물게', '거의', '거의', '대부분',
        
        # 감탄사/의성어/의태어
        '아', '어', '오', '우', '에', '이', '야', '와', '워', '헉', '어머', '아이고',
        '어이구', '이런', '저런', '어떻게', '왜', '뭐', '글쎄', '음', '흠', '아하',
        'ㅋㅋ', 'ㅋㅋㅋ', 'ㅎㅎ', 'ㅎㅎㅎ', 'ㅠㅠ', 'ㅜㅜ', 'ㅡㅡ', ';;', '...', '…',
        
        # 인터넷 용어/줄임말
        '님', '분', '씨', '쌤', '형', '누나', '언니', '오빠', '동생', '친구', '사람들',
        '여러분', '모든분', '모든분들', '여러분들', '댓글', '답글', '대댓글',
        '좋아요', '싫어요', '구독', '알림', '설정', '공유', '저장', '신고',
        
        # 유튜브 관련
        '영상', '동영상', '비디오', '채널', '유튜브', '유튜버', '크리에이터', '콘텐츠',
        '썸네일', '제목', '설명', '태그', '조회수', '구독자', '업로드', '라이브', '스트리밍',
        '프리미어', '쇼츠', '플레이리스트', '링크', '주소', 'url', 'http', 'https',
        
        # 뉴스/미디어 관련
        '뉴스', '기사', '언론', '방송', '신문', '잡지', '매체', '미디어', '기자', '앵커',
        '리포터', '특파원', '편집자', '제작진', '피디', '작가', '연출', '제작',
        
        # 일반적인 명사 (너무 일반적인 것들)
        '사람', '인간', '남성', '여성', '어른', '아이', '학생', '선생', '직장인',
        '회사원', '공무원', '사장', '부장', '과장', '대리', '주임', '신입', '선배', '후배',
        
        # 특정 인물명 (분석 대상)
        '유아인', '돈스파이크', '돈스', '스파이크', '지디', '지드래곤', 'GD'
        
        # 법정/사건 관련 일반어
        '사건', '사고', '재판', '판결', '법원', '검찰', '경찰', '수사', '조사', '체포',
        '구속', '석방', '기소', '불기소', '혐의', '용의자', '피의자', '피고인', '원고',
        '변호사', '검사', '판사', '증인', '증거', '진술', '자백', '부인', '인정',
        '징역', '집행유예', '벌금', '과태료', '선고', '항소', '상고', '무죄', '유죄',
        
        # 연예계 관련 일반어
        '연예인', '배우', '가수', '아이돌', '탤런트', '모델', '개그맨', '코미디언',
        '방송인', '진행자', '엠씨', 'mc', 'dj', '래퍼', '힙합', '트로트', '발라드',
        '댄서', '안무가', '작곡가', '작사가', '프로듀서', '매니저', '소속사', '기획사',
        '데뷔', '활동', '휴식', '은퇴', '복귀', '컴백', '신곡', '앨범', '싱글',
        
        # 무의미한 단어들 (BERTopic에서 자주 나오는 문제 단어들) - 추가
        '이렇', '저렇', '그렇', '어떻', '어느', '어쩌', '어디', '무엇', '누구', '언제',
        '나라', '이나', '그나', '저나', '어나', '뭐나', '모든', '모두', '전부', '다른',
        '같은', '다시', '또다시', '다음', '이번', '저번', '그번', '어번',
        '이거', '저거', '그거', '어거', '뭔거', '어떤거', '이런거', '저런거', '그런거',
        '이것', '저것', '그것', '어것', '뭔것', '무엇인', '어떤것',
        '하는', '되는', '말하는', '생각하는', '느끼는', '보이는', '듣는',
        '때문', '이유', '원인', '결과', '방법', '방식', '형태', '모습', '상태',
        '이제', '지금', '그때', '언제', '어떻게', '어디서', '누가', '무엇을',
        '하지', '하니', '하고', '하면', '하더', '하다가', '했다가',
        '이에', '그에', '저에', '어에', '무에', '누에',
        '의해', '위해', '때문에', '덕분에', '탓에',
        '거의', '전혀', '완전', '정말', '너무', '매우', '아주', '상당',
        '좀', '살짝', '조금', '약간', '다소', '꽤', '상당히',
        '대해', '관해', '통해', '따라', '의하', '위하', '위한', '대한', '관한',
        '아니', '아닌', '아니고', '아니다', '아니야', '아닐', '아님',
        '이런', '저런', '그런', '어떤', '무슨', '어느', '누구', '언제',
        '없는', '있는', '하는', '되는', '되지', '안되', '못하', '안하',
        
        # 감정 표현 (분석에 방해되는 일반적인 것들)
        '기분', '느낌', '감정', '마음', '생각', '의견', '견해', '입장', '태도',
        '반응', '응답', '대답', '질문', '문의', '요청', '부탁', '제안', '의견',
        
        # 기타 불용어
        '등등', '기타', '나머지', '그외', '이외', '외에', '말고', '빼고', '제외하고',
        '포함해서', '포함하여', '비롯해서', '비롯하여', '관련해서', '관련하여',
        '대해서', '대하여', '통해서', '통하여', '위해서', '위하여', '따라서', '따라',
        '의해서', '의하여', '로써', '로서', '에서', '에게서', '부터', '까지',
        
        # 단위/측정
        '개', '명', '분', '초', '시간', '일', '주', '달', '년', '번', '차례', '회',
        '점', '개', '마리', '그루', '송이', '자루', '권', '장', '페이지', '쪽',
        '미터', '센티', '킬로', '그램', '리터', '도', '퍼센트', '%',
        
        # 숫자 관련
        '영', '공', '하나', '한', '두', '세', '네', '다섯', '여섯', '일곱', '여덟', '아홉',
        '첫번째', '두번째', '세번째', '네번째', '다섯번째',
        '1', '2', '3', '4', '5', '6', '7', '8', '9', '0',
        
        # 기호/특수문자 관련
        '!', '?', '.', ',', ';', ':', '"', "'", '(', ')', '[', ']', '{', '}',
        '@', '#', '$', '%', '^', '&', '*', '+', '-', '=', '_', '|', '\\', '/',
        '<', '>', '~', '`'
    ]
    
    # ===== 분석 파라미터 =====
    ANALYSIS_PARAMS = {
        'min_comment_length': 5,  # 최소 댓글 길이
        'max_comment_length': 200,  # 최대 댓글 길이
        'sample_size': None,  # None이면 전체 데이터 사용
        'confidence_threshold': 0.7,  # 감성 분석 신뢰도 임계값
        'topic_coherence_threshold': 0.4,  # 토픽 일관성 임계값
    }
    
    # ===== 댓글 품질 필터링 설정 =====
    COMMENT_FILTERING = {
        # 추천수 기반 필터링
        'upvote_filtering': {
            'enabled': True,  # 추천수 필터링 활성화 여부
            'min_upvotes': 5,  # 최소 추천수 (이 값 미만은 제외)
            'min_net_upvotes': 0,  # 최소 순추천수 (upvotes - downvotes, 이 값 미만은 제외)
            'use_net_upvotes_only_when_positive': True,  # 순추천수가 양수일 때만 필터링 적용
        },
        
        # 키워드 기반 필터링
        'keyword_filtering': {
            'enabled': True,  # 키워드 필터링 활성화 여부
            
            # 반드시 포함해야 하는 키워드 (OR 조건 - 하나라도 포함되면 통과)
            'required_keywords': [
                '돈스파이크'
                # '지디', '지드래곤', 'GD'
                # '유아인'
                # '유아인', '마약', '대마초', '프로포폴', '약물', '마리화나', '대마', '필로폰',
                # '코카인', '헤로인', '엑스터시', '메스암페타민', '양성', '검출', '복용',
                # '투약', '사용', '흡입', '주사', '처방', '의료용', '불법', '합법',
                # '중독', '의존', '금단', '치료', '재활', '상습', '단순', '초범',
                # '재범', '상습범', '수사', '조사', '체포', '구속', '기소', '불기소',
                # '재판', '판결', '선고', '징역', '집행유예', '벌금', '무죄', '유죄',
                # '혐의', '용의자', '피의자', '피고인', '자백', '부인', '인정', '시인',
                # '반성', '사과', '해명', '입장', '소명', '변명', '핑계', '책임',
                # '잘못', '실수', '후회', '뉘우침', '개과천선', '갱생', '복귀',
                # '은퇴', '활동중단', '휴식', '자숙', '성찰', '반성문'
            ],
            
            # 🔧 강화된 필터링 조건 설정
            'filtering_mode': 'enhanced',  # 'basic' 또는 'enhanced'
            
            # 강화된 모드에서의 조건 (OR 조건 - 하나라도 만족하면 통과)
            'enhanced_conditions': {
                # 조건 1: 제목에 키워드 포함
                'title_contains_keywords': {
                    'enabled': True,
                    'title_column': 'video_title',  # 제목 컬럼명 (CSV에서)
                    'keywords': [  # 제목에서 찾을 키워드 (required_keywords와 동일하거나 별도 설정 가능)
                        '돈스파이크'
                    ]
                },
                
                # 조건 2: 댓글들 중 최소 비율 이상이 키워드 포함
                'comment_ratio_threshold': {
                    'enabled': True,
                    'min_ratio': 0.40,  # 40% 이상의 댓글이 키워드를 포함해야 함 (파라미터)
                    'keywords': [  # 댓글에서 찾을 키워드 (required_keywords와 동일하거나 별도 설정 가능)
                        '돈스파이크'
                    ]
                }
            },
            
            # 기본 모드에서의 조건 (기존 방식)
            'basic_conditions': {
                'min_keyword_matches': 1,  # 최소 필수 키워드 매칭 수
            },
            
            # 제외할 키워드 (이 키워드가 포함된 댓글은 제외)
            'excluded_keywords': [
                '광고', '홍보', '스팸', '도배', '어그로', '낚시', '클릭베이트',
                '구독', '좋아요', '알림설정', '첫댓글', '몇등', '1등', '2등', '3등',
                '링크', 'http', 'https', 'www', '.com', '.net', '.org',
                '카톡', '카카오톡', '텔레그램', '인스타', '페이스북', '트위터',
                '전화번호', '연락처', '만남', '데이트', '섹스', '야동', '포르노',
                '도박', '카지노', '토토', '배팅', '사기', '피싱', '해킹',
                '대출', '투자', '주식', '코인', '비트코인', '부업', '알바',
                '쇼핑몰', '할인', '세일', '이벤트', '경품', '추첨', '당첨',
                'ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ', 'ㅎㅎㅎㅎㅎㅎㅎㅎㅎㅎ',  # 과도한 이모티콘
                'ㅠㅠㅠㅠㅠㅠㅠㅠㅠㅠ', 'ㅜㅜㅜㅜㅜㅜㅜㅜㅜㅜ'
            ],
            
            # 키워드 매칭 옵션
            'case_sensitive': False,  # 대소문자 구분 여부
            'partial_match': True,  # 부분 매칭 허용 여부 (False면 완전 일치만)
        },
        
        # 댓글 품질 필터링
        'quality_filtering': {
            'enabled': True,  # 품질 필터링 활성화 여부
            'min_korean_ratio': 0.3,  # 최소 한글 비율 (0.0-1.0)
            'max_special_char_ratio': 0.5,  # 최대 특수문자 비율 (0.0-1.0)
            'max_repeated_char_ratio': 0.3,  # 최대 반복 문자 비율 (0.0-1.0)
            'min_meaningful_words': 2,  # 최소 의미있는 단어 수
            'exclude_single_char_comments': True,  # 한 글자 댓글 제외
            'exclude_emoji_only_comments': True,  # 이모지만 있는 댓글 제외
        },
        
        # 중복 댓글 필터링
        'duplicate_filtering': {
            'enabled': True,  # 중복 필터링 활성화 여부
            'similarity_threshold': 0.9,  # 유사도 임계값 (0.0-1.0)
            'keep_highest_upvotes': True,  # 중복 시 추천수가 높은 것 유지
            'exact_match_only': False,  # 완전 일치만 중복으로 처리할지 여부
        },
        
        # 사용자 기반 필터링
        'user_filtering': {
            'enabled': False,  # 사용자 필터링 활성화 여부 (기본 비활성화)
            'exclude_users': [],  # 제외할 사용자 목록
            'min_user_comments': 1,  # 사용자별 최소 댓글 수
            'max_user_comments': 100,  # 사용자별 최대 댓글 수 (스팸 방지)
                 }
     }
    
    # ===== 시각화 설정 =====
    VISUALIZATION = {
        'figsize': (15, 10),
        'dpi': 300,
        'font_family': 'DejaVu Sans',  # 안정적인 기본 폰트 사용
        'font_size': 12,
        'color_palette': 'Set2',
        'save_format': 'png'
    }
    
    # ===== 파일 경로 설정 =====
    # YoutubeAnalysis 디렉토리 내부에서만 작동하도록 설정
    BASE_DIR = os.path.dirname(os.path.abspath(__file__))  # YoutubeAnalysis 디렉토리
    DATA_DIR = os.path.join(BASE_DIR, 'data')
    OUTPUT_DIR = os.path.join(BASE_DIR, 'output')
    SRC_DIR = os.path.join(BASE_DIR, 'src')
    
    # 출력 디렉토리 구조
    OUTPUT_STRUCTURE = {
        'visualizations': os.path.join(OUTPUT_DIR, 'visualizations'),
        'reports': os.path.join(OUTPUT_DIR, 'reports'),
        'data_processed': os.path.join(OUTPUT_DIR, 'data_processed'),
        'models': os.path.join(OUTPUT_DIR, 'models')
    }
    
    # ===== 로깅 설정 =====
    LOGGING = {
        'level': 'INFO',
        'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        'file': os.path.join(OUTPUT_DIR, 'analysis.log')
    }
    
    # ===== 데이터 파일 설정 =====
    DATA_FILES = {
        'youtube_comments': os.path.join(DATA_DIR, 'sample_youtube_comments.csv'),  # 샘플 데이터 사용
        'processed_data': 'processed_comments.pkl',
        'analysis_results': 'analysis_results.json'
    }
    
    # ===== 월별 분석 설정 =====
    MONTHLY_ANALYSIS = {
        'start_date': None,  # 동적으로 데이터에서 추출
        'end_date': None,    # 동적으로 데이터에서 추출
        'date_format': '%Y-%m-%d',
        'groupby_format': '%Y-%m'
    }
    
    # ===== 적응적 시간 분할 설정 =====
    ADAPTIVE_TIME_ANALYSIS = {
        'enabled': True,  # 적응적 시간 분할 활성화
        
        # 🔧 시간 간격 최소 단위 설정 (하이퍼파라미터)
        # 'daily': 일별까지 세분화 허용 (월→주→일)
        # 'weekly': 주별까지 세분화 허용 (월→주)  
        # 'monthly': 월별만 허용 (월)
        # 
        # 📝 사용 예시:
        # - 'monthly': 장기 트렌드 분석, 계절성 분석에 적합
        # - 'weekly': 중기 패턴 분석, 이벤트 영향 분석에 적합  
        # - 'daily': 단기 변화 분석, 실시간 반응 분석에 적합
        'min_time_unit': 'monthly',  # 'daily', 'weekly', 'monthly' 중 선택
        
        # 각 최소 단위별 설정
        'time_unit_configs': {
            'daily': {
                'initial_level': 'monthly',
                'max_subdivision_depth': 2,  # 월→주→일
                'subdivision_chain': ['monthly', 'weekly', 'daily']
            },
            'weekly': {
                'initial_level': 'monthly', 
                'max_subdivision_depth': 1,  # 월→주
                'subdivision_chain': ['monthly', 'weekly']
            },
            'monthly': {
                'initial_level': 'monthly',
                'max_subdivision_depth': 0,  # 월만 사용
                'subdivision_chain': ['monthly']
            }
        },
        
        'high_ratio_threshold': 0.25,  # 특정 기간 비율이 이 값 이상이면 세분화
        'subdivision_levels': {
            'monthly': {
                'next_level': 'weekly',
                'format': '%Y-%m-%d ~ %Y-%m-%d',  # 시작일~종료일 형식
                'groupby_format': '%Y-W%U',  # 주별 그룹화
                'min_days': 7,  # 최소 기간 (일)
                'description': '월별 분석'
            },
            'weekly': {
                'next_level': 'daily', 
                'format': '%Y-%m-%d ~ %Y-%m-%d',
                'groupby_format': '%Y-%m-%d',  # 일별 그룹화
                'min_days': 1,  # 최소 기간 (일)
                'description': '주별 분석'
            },
            'daily': {
                'next_level': None,  # 더 이상 세분화하지 않음
                'format': '%Y-%m-%d',
                'groupby_format': '%Y-%m-%d',
                'min_days': 1,  # 최소 기간 (일)
                'description': '일별 분석'
            }
        },
        'min_comments_per_period': 10,  # 기간별 최소 댓글 수
        
        # 동적으로 설정되는 값들 (min_time_unit에 따라 자동 조정)
        'max_subdivision_depth': None,  # 런타임에 설정
        'subdivision_chain': None,  # 런타임에 설정
    }
    
    # ===== 네트워크 분석 설정 =====
    NETWORK_ANALYSIS = {
        'min_cooccurrence': 3,  # 최소 동시 출현 빈도
        'max_nodes': 50,  # 최대 노드 수
        'layout': 'spring',  # 네트워크 레이아웃
        'node_size_multiplier': 100
    }
    
    # ===== 워드클라우드 설정 =====
    WORDCLOUD = {
        'width': 800,
        'height': 400,
        'max_words': 20,  # 단어 수 더 감소
        'min_font_size': 15,  # 최소 폰트 크기 증가
        'max_font_size': 80,  # 최대 폰트 크기 설정
        'background_color': 'white',
        'colormap': 'viridis',  # 더 대비가 강한 색상
        'prefer_horizontal': 0.8,  # 가로 배치 선호
        'collocations': False,  # 연어 비활성화
        'relative_scaling': 0.6,  # 크기 차이 강화
        'font_path': None  # 시스템 기본 폰트 사용
    }

# 설정 검증 함수
def validate_config():
    """설정 유효성 검사"""
    print(f"🔧 분석 설정 검증 중...")
    print(f"📱 디바이스: {AnalysisConfig.DEVICE}")
    print(f"🎯 분석 모드: {AnalysisConfig.ANALYSIS_MODE}")
    print(f"📊 감성 모델: {list(AnalysisConfig.SENTIMENT_MODELS.keys())}")
    print(f"🔍 토픽 모델: {list(AnalysisConfig.TOPIC_MODELS.keys())}")
    print(f"📁 기본 디렉토리: {AnalysisConfig.BASE_DIR}")
    print(f"📁 데이터 디렉토리: {AnalysisConfig.DATA_DIR}")
    print(f"📁 출력 디렉토리: {AnalysisConfig.OUTPUT_DIR}")
    print(f"📄 CSV 파일 경로: {AnalysisConfig.DATA_FILES['youtube_comments']}")
    
    # CSV 파일 존재 확인
    csv_path = AnalysisConfig.DATA_FILES['youtube_comments']
    if os.path.exists(csv_path):
        print(f"✅ CSV 파일 확인됨: {csv_path}")
    else:
        print(f"❌ CSV 파일 없음: {csv_path}")
    
    # 필요한 디렉토리 생성
    for dir_name, dir_path in AnalysisConfig.OUTPUT_STRUCTURE.items():
        os.makedirs(dir_path, exist_ok=True)
        print(f"✅ {dir_name} 디렉토리 생성: {dir_path}")
    
    return True

if __name__ == "__main__":
    validate_config() 